import {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash-exp",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan forstocation: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON format travel plan for a couple visiting Las Vegas on a budget, covering 3 days.  I\'ve focused on free or low-cost activities and value-priced hotels.  Keep in mind that prices can fluctuate.  I will be using placeholder values for some image URLs as I cannot directly access images and the actual pricing will vary based on the season and booking time.\n\n```json\n{\n  "tripName": "Las Vegas on a Budget: 3-Day Couple\'s Getaway",\n  "budget": "Cheap",\n   "travelers": "Couple",\n  "location": "Las Vegas, NV",\n   "hotels": [\n    {\n      "hotelName": "Circus Circus Hotel",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n       "hotelImageURL": "https://example.com/circuscircus.jpg",\n      "price": "$50 - $100 per night",\n       "geoCoordinates": {\n          "latitude": 36.1376,\n          "longitude": -115.1636\n      },\n      "rating": 3.5,\n      "description": "Affordable hotel on the Strip with a circus theme. Offers budget-friendly rooms and attractions."\n    },\n    {\n      "hotelName": "Strat Hotel, Casino & SkyPod",\n      "hotelAddress": "2000 S Las Vegas Blvd, Las Vegas, NV 89104",\n       "hotelImageURL": "https://example.com/strat.jpg",\n       "price": "$60 - $120 per night",\n      "geoCoordinates": {\n          "latitude": 36.1519,\n          "longitude": -115.1543\n        },\n      "rating": 4.0,\n      "description": "Located at the north end of the Strip, offers budget rooms and access to the SkyPod for stunning views."\n    },\n      {\n       "hotelName": "Excalibur Hotel and Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n       "hotelImageURL": "https://example.com/excalibur.jpg",\n      "price": "$55 - $110 per night",\n         "geoCoordinates": {\n          "latitude": 36.0984,\n          "longitude": -115.1736\n      },\n      "rating": 3.8,\n      "description": "Medieval-themed hotel with budget-friendly accommodations and a fun atmosphere."\n    }\n  ],\n   "itinerary": {\n    "day1": {\n      "theme": "Exploring the South Strip & Free Shows",\n      "bestTimeToVisit": "Afternoon and Evening",\n      "activities": [\n        {\n          "placeName": "Bellagio Conservatory & Botanical Gardens",\n          "placeDetails": "Free indoor garden display with themed designs that changes seasonally. A must see for all nature lovers.",\n          "placeImageURL": "https://example.com/bellagio_gardens.jpg",\n           "geoCoordinates": {\n          "latitude": 36.1128,\n          "longitude": -115.1746\n        },\n          "ticketPricing": "Free",\n          "timeToTravel": "5 min walk from the Strip"\n        },\n         {\n          "placeName": "Bellagio Fountains Show",\n           "placeDetails": "Spectacular free water show with lights and music, usually runs every 30 minutes in the afternoon and every 15 minutes in the evening.",\n           "placeImageURL": "https://example.com/bellagio_fountains.jpg",\n           "geoCoordinates": {\n          "latitude": 36.1126,\n          "longitude": -115.1735\n            },\n          "ticketPricing": "Free",\n           "timeToTravel": "Adjacent to the Conservatory"\n        },\n        {\n          "placeName": "Mirage Volcano",\n          "placeDetails": "Free volcano eruption show with fire and sound effects. Runs nightly on the hour, between 8pm - 11pm",\n          "placeImageURL": "https://example.com/mirage_volcano.jpg",\n           "geoCoordinates": {\n          "latitude": 36.1201,\n          "longitude": -115.1744\n            },\n          "ticketPricing": "Free",\n          "timeToTravel": "10 min walk from Bellagio"\n        },\n          {\n          "placeName": "Walk the Las Vegas Strip",\n          "placeDetails": "Stroll along the iconic Las Vegas Strip. It\'s free to wander and take in the sights and sounds of the themed hotels.",\n          "placeImageURL": "https://example.com/vegas_strip.jpg",\n           "geoCoordinates": {\n          "latitude": 36.1147,\n          "longitude": -115.1728\n          },\n          "ticketPricing": "Free",\n          "timeToTravel": "Varies as per locations"\n          }\n       ]\n    },\n    "day2": {\n      "theme": "Downtown & Fremont Street Experience",\n       "bestTimeToVisit": "Evening",\n      "activities": [\n        {\n           "placeName": "Fremont Street Experience",\n          "placeDetails": "Free pedestrian mall in Downtown Las Vegas featuring a massive LED canopy screen showing light shows and music",\n          "placeImageURL": "https://example.com/fremont_street.jpg",\n             "geoCoordinates": {\n          "latitude": 36.1698,\n          "longitude": -115.1402\n          },\n          "ticketPricing": "Free",\n           "timeToTravel": "20 mins drive from Strip (or bus)"\n         },\n         {\n           "placeName": "Container Park",\n          "placeDetails": "Unique shopping and dining area built from shipping containers, has free live music in the evening and a kids playground.",\n          "placeImageURL": "https://example.com/container_park.jpg",\n             "geoCoordinates": {\n          "latitude": 36.1691,\n           "longitude": -115.1390\n          },\n          "ticketPricing": "Free to enter (prices vary for food/shopping)",\n           "timeToTravel": "5 min walk from Fremont"\n         },\n          {\n          "placeName": "SlotZilla Zipline",\n          "placeDetails":"Optional thrill ride over Fremont Street, not free but can be part of a fun night out. Ticket pricing is $39-$49",\n          "placeImageURL":"https://example.com/slotzilla.jpg",\n             "geoCoordinates":{\n          "latitude": 36.1703,\n          "longitude": -115.1399\n        },\n           "ticketPricing":"$39-$49",\n           "timeToTravel": "At Fremont Street"\n          }\n      ]\n    },\n     "day3": {\n      "theme": "Exploring Resort amenities and Departure",\n        "bestTimeToVisit": "Morning/Afternoon",\n      "activities": [\n         {\n          "placeName":"Pool at your hotel",\n          "placeDetails": "Spend the morning relaxing at the pool of your hotel, a free amenity for hotel guest",\n          "placeImageURL": "https://example.com/hotel_pool.jpg",\n             "geoCoordinates": {\n            "latitude": 0,\n            "longitude": 0\n          },\n            "ticketPricing": "Free",\n           "timeToTravel": "At your hotel"\n        },\n         {\n          "placeName": "Exploring Hotel Amenities",\n          "placeDetails":"Enjoy some of the hotel\'s free amenities like arcade games (many have cheap options) or wander through the shopping areas. Some may offer free samples and demos",\n            "placeImageURL":"https://example.com/hotel_amenities.jpg",\n             "geoCoordinates": {\n              "latitude": 0,\n              "longitude": 0\n            },\n           "ticketPricing":"Mostly Free (arcade may require token purchase)",\n            "timeToTravel":"At your hotel"\n        },\n        {\n          "placeName": "Departure",\n          "placeDetails": "Check out of hotel and head towards the airport for departure",\n           "placeImageURL":"https://example.com/airport.jpg",\n             "geoCoordinates": {\n              "latitude": 36.0800,\n              "longitude": -115.1522\n            },\n          "ticketPricing":"Varies depending on mode of transport",\n          "timeToTravel":"Varies"\n        }\n\n      ]\n    }\n   }\n}\n```\n\n**Important Notes:**\n\n*   **Prices:** Hotel and ticket prices are estimates. Book in advance and check for deals.\n*   **Transportation:**  Consider walking as much as possible on the Strip. Use buses or ride-sharing services for longer distances. The Deuce bus is a budget-friendly option for getting up and down the Strip and to Fremont St.\n*   **Food:**  Look for happy hour specials and affordable food options, skip the high-end restaurants, consider grocery store snacks and drinks.\n*   **Flexibility:**  This is a suggested itinerary, feel free to adjust it to your interests and pace.\n*   **Free Activities:** There are many free things to do in Vegas - capitalize on them.\n*   **Check Show Times:**  Confirm the times of shows beforehand, as schedules can change.\n* **Image URLs:**  The placeholder image URLs will need to be replaced with actual URLs.\n\nThis plan focuses on maximizing your Vegas experience without overspending. Remember to enjoy the energy and excitement of the city!\n',
        },
      ],
    },
  ],
});
